<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>BCIs计算</title>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <link href="https://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/vue/2.4.2/vue.min.js"></script>
</head>
<body>
    <script>

    </script>
    <div id="VueBridge">
        <div class="row">
            <div class="col-md-1">

            </div>
            <div class="col-md-1">
                请选择桥梁类型
            </div>
            <div class="col-md-1">
                <select v-model="bridgeSelected">
                    <option value="beam">梁桥</option>
                    <option value="cantileverSuspended">悬臂+挂梁</option>
                    <option value="truss">桁架桥</option>
                    <option value="rigid">刚构桥</option>
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
                {{setShowState(bridgeSelected)}}
            </div>
            <div class="col-md-3">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <td>桥梁分类</td>
                            <td>构件类型</td>
                            <td>评价项</td>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- 梁桥 -->

                            <tr v-show="isShow">
                                <!--v-show="{{setShowState(bridgeSelected)}}"-->

                                <td rowspan="2">梁桥</td>
                                <td>
                                    <input type="checkbox" checked="checked" />主梁
                                </td>
                                <td>
                                    <button>PC或RC梁式构件</button>、
                                    <button>钢结构物</button>
                                </td>
                            </tr>
                            <tr v-show="isShow">

                                <td>
                                    <input type="checkbox" checked="checked" />横向联系
                                </td>
                                <td>
                                    <button>横向联系</button>
                                    <button>钢结构物</button>
                                </td>

                            </tr>
                        


                        <!-- 悬臂+挂梁 -->
                        <tr>
                            <td rowspan="4">悬臂+挂梁</td>
                            <td>
                                <input type="checkbox" checked="checked" />悬臂梁
                            </td>
                            <td>
                                <button>PC或RC梁式构件</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" checked="checked" />挂梁
                            </td>
                            <td>
                                <button>PC或RC梁式构件</button>
                                <button>钢结构物</button>
                            </td>

                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" checked="checked" />挂梁支座
                            </td>
                            <td>
                                <button>支座</button>
                            </td>

                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" checked="checked" />防落梁装置
                            </td>
                            <td>
                                <button>防落梁装置</button>
                            </td>

                        </tr>
                        <!-- 桁架桥 -->

                        <tr>
                            <td rowspan="5">桁架桥</td>
                            <td>
                                <input type="checkbox" checked="checked" />桁片
                            </td>
                            <td>
                                <button>PC或RC梁式构件</button>、
                                <button>钢结构物</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" checked="checked" />主节点
                            </td>
                            <td>
                                <button>PC或RC梁式构件</button>、
                                <button>钢结构物</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" checked="checked" />纵梁
                            </td>
                            <td>
                                <button>PC或RC梁式构件</button>、
                                <button>钢结构物</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" checked="checked" />横梁
                            </td>
                            <td>
                                <button>PC或RC梁式构件</button>、
                                <button>钢结构物</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" checked="checked" />连接件
                            </td>
                            <td>
                                <button>PC或RC梁式构件</button>、
                                <button>钢结构物</button>
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>



    </div>
    <script>
        const oriCoeffs = [0.30, 0.15, 0.25, 0.10, 0.10, 0.10];
        var calcCoeffs = oriCoeffs
        var vm = new Vue({
            el: '#VueBridge',
            data: {
                bridgeSelected: '',
                
                mainExists: [1, 1, 1, 1, 1, 1],
                coeffs: [0.30, 0.15, 0.25, 0.10, 0.10, 0.10],
                DP1: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
            },
            computed: {
                calcCoeffs: function () {
                    return [this.GetcalcCoeffs(0), this.GetcalcCoeffs(1), this.GetcalcCoeffs(2)
                        , this.GetcalcCoeffs(4), this.GetcalcCoeffs(4), this.GetcalcCoeffs(5)]
                },
                sigmaDP1: function () {
                    var sum = 0
                    for (i = 0; i < this.DP1.length; i++)
                        sum += this.DP1[i] * 1.0;
                    return sum.toFixed(3)
                },
                u1: function () {
                    return [this.DP1[0] / this.sigmaDP1, this.DP1[1] / this.sigmaDP1, this.DP1[2] / this.sigmaDP1
                        , this.DP1[3] / this.sigmaDP1, this.DP1[4] / this.sigmaDP1, this.DP1[5] / this.sigmaDP1
                        , this.DP1[6] / this.sigmaDP1, this.DP1[7] / this.sigmaDP1, this.DP1[8] / this.sigmaDP1, this.DP1[9] / this.sigmaDP1]
                },
                w1: function () {
                    return [this.getWeight(this.u1[0]), this.getWeight(this.u1[1]), this.getWeight(this.u1[2])
                        , this.getWeight(this.u1[3]), this.getWeight(this.u1[4]), this.getWeight(this.u1[5])
                        , this.getWeight(this.u1[6]), this.getWeight(this.u1[7]), this.getWeight(this.u1[8]), this.getWeight(this.u1[9])]
                },
                MDP1: function () {
                    var sum = 0
                    for (i = 0; i < this.DP1.length; i++)
                        sum += this.DP1[i] * this.w1[i] * 1.0;
                    return sum.toFixed(3)
                },
                showState: function (v) {
                    if (v == "beam")
                        return true;
                    else
                        return false;
                },
                isShow: function () {
                    if (this.bridgeSelected=="beam")
                        return true
                    else
                        return false
                },

            },
            function() {
                return {
                    items: [{
                        state: false
                    }, {
                        state: true
                    }]
                };
            },
            methods: {
                details: function () {
                    return this.site + " - 学的不仅是技术，更是梦想！";
                },
                testOutput: function (num) {
                    return parseFloat(num);
                },
                getWeight: function (u) {
                    return parseFloat(3.0 * u ** 3 - 5.5 * u ** 2 + 3.5 * u).toFixed(3);
                },
                GetcalcCoeffs: function (index) {
                    var sum = 0
                    for (i = 0; i < this.coeffs.length; i++)
                        sum += this.mainExists[i] * this.coeffs[i];
                    return (this.mainExists[index] * this.coeffs[index] / sum).toFixed(3);
                },
                toggle: function () {
                    this.isShow = !this.isShow;
                },
                setShowState: function (v) {
                    if (v == "beam")
                        return true
                    else
                        return false
                },

            }
        })

    </script>
</body>
</html>